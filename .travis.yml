language: python
python:
    - "3.7"

os: linux
dist: xenial
cache: pip
before_install:
    - export PYTHONPATH=$TRAVIS_BUILD_DIR:$PYTHONPATH
    - cp $TRAVIS_BUILD_DIR/.pyscf_conf.py ~/.pyscf_conf.py
    - pip install -r requirements.txt

matrix:
  include:
    - name: pyxdh
      script:
        - cd $TRAVIS_BUILD_DIR
        - export LOGLEVEL=2
        - pytest pyxdh --disable-warnings --cov=pyxdh --cov-config=.coveragerc

deploy:
  provider: pypi
  user: ajz34
  password:
    secure: xGSYjKo9GIvmkM9lmn+3iK8NIW1T9qiKH8PX4iPl8RNRfuZcHCNRVA0Wh/lIdTnqWJC8BqZlc/Zmui7qrwgQmf8OxnQd8vltxUc+jIv26d8VOZ2LauGM/2zlzVWEBtH0L83LiFdXOVJbEH/7Ak9rLncEqaraP9LCYyiTF9OoTEbURCA4Nf3l4sRCKKLeD89ztd97xceRFdWAUaf2PeySZSvz0cW/RUkEwecxPeQCSm1pX7RTDgTDOS8NYTx7O76AA0oNd1HZZUm4mG5ccm5gokDBgJjg5k6cHYaN3xlfWyPxp9D7VpQLHlyG1wHDryD9X8Y6or6dIjLwPfbLnQF+8zz7+rNxRUFX9q/I4mO/LQNDoltl4cqwzs03hDyOMazwAQ+CjthsJP6qtUrfUvb/RY7jLl066SzOzJbXQXAN9/YZOosyjPGkE44bi1TGga3c7deNaltyKQSrAX4MF5djFvSKtsABVfz/blraL5pWeCHLPVZEBEvjQpyLImT2dsFqxvAI9dibets5HJLtIYQj3uyjiAFzuyrgZvsfbtI24k6jYk1O/VP4TTltizK7dS1JxNRSMH0tyIwRxLYrTuRfFL9545ezyXBsybHIOevo2yu74isNhnDa+aHi7icXc6tVyxcqvsMjaRdxIDX+YLO15vxaDC0UxuF60GUXcvFYxGE=
  on:
    tags: true
